<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goals</title>
    <style>
        body {
            background-color: #2c2c2c;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            color: white;
        }
        h1 {
            text-align: center;
            color: #ffffff;
            font-size: 2em;
            margin: 20px 0;
        }
        label {
            display: block;
            margin: 10px 0 5px;
            font-size: 1em;
        }
        input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        button:hover {
            background-color: #45a049;
        }
        .button-small {
            padding: 8px;
            font-size: 0.8em;
            width: auto;
        }
        .button-medium {
            padding: 10px;
            font-size: 1em;
            width: auto;
        }
        .button-large {
            padding: 12px;
            font-size: 1.2em;
            width: auto;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            background: #eee;
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 4px;
            font-size: 1em;
            position: relative;
            color: black;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #ccc;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }
        .progress-bar {
            height: 20px;
            background-color: #4CAF50;
            width: 0;
            border-radius: 4px;
        }
        .edit-button, .remove-button {
            background-color: #008CBA;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            padding: 5px;
            margin-left: 10px;
        }
        .edit-button:hover, .remove-button:hover {
            background-color: #007bb5;
        }
        .update-container {
            display: none;
            margin-top: 10px;
        }
        .update-container input {
            width: calc(100% - 50px);
            display: inline-block;
        }
        .update-container button {
            width: 45px;
            display: inline-block;
        }
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; 
            background-color: rgb(0,0,0); 
            background-color: rgba(0,0,0,0.4); 
        }
        .modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 90%;
            max-width: 400px;
            border-radius: 4px;
            color: black;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        @media (min-width: 600px) {
            .container {
                max-width: 600px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Goals</h1>
    <button id="openModalButton" class="button-large">Add Goal</button>
    
    <h2>Goals List</h2>
    <ul id="goalsList"></ul>
</div>

<!-- The Modal -->
<div id="addGoalModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <label for="goalType">Goal Type:</label>
    <select id="goalType" name="goalType" onchange="toggleCustomInput(this.value)">
        <option value="Planned Payments">Planned Payments</option>
        <option value="Emergency Funds">Emergency Funds</option>
        <option value="Goals">Goals</option>
        <option value="custom">Custom</option>
    </select>
    <div id="customGoalDiv" class="hidden">
        <label for="customGoal">Enter custom goal:</label>
        <input type="text" id="customGoal" name="customGoal">
    </div>
    <label for="goalAmount">Amount Allocated:</label>
    <input type="number" id="goalAmount" placeholder="Enter amount">
    
    <label for="goalProgress">Progress Percentage:</label>
    <input type="number" id="goalProgress" placeholder="Enter progress percentage">
    
    <button onclick="addGoal()" class="button-large">Add Goal</button>
  </div>
</div>

<script>
    // Get modal element
    const modal = document.getElementById("addGoalModal");
    const openModalButton = document.getElementById("openModalButton");
    const closeModalButton = document.getElementsByClassName("close")[0];

    // Open modal
    openModalButton.onclick = function() {
        modal.style.display = "block";
    }

    // Close modal
    closeModalButton.onclick = function() {
        modal.style.display = "none";
    }

    // Close modal if user clicks outside of it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    // Toggle custom input field
    function toggleCustomInput(value) {
        const customGoalDiv = document.getElementById("customGoalDiv");
        if (value === "custom") {
            customGoalDiv.classList.remove("hidden");
        } else {
            customGoalDiv.classList.add("hidden");
        }
    }

    function addGoal() {
        // Get input values
        const goalType = document.getElementById('goalType').value;
        let goalName = goalType;
        if (goalType === 'custom') {
            goalName = document.getElementById('customGoal').value;
            if (goalName === '') {
                alert('Please enter a custom goal name.');
                return;
            }
        }
        const goalAmount = document.getElementById('goalAmount').value;
        const goalProgress = document.getElementById('goalProgress').value;

        // Check if inputs are not empty
        if (goalName === '' || goalAmount === '' || goalProgress === '') {
            alert('Please enter goal name, amount, and progress percentage.');
            return;
        }

        // Create a new list item
        const li = document.createElement('li');
        li.innerHTML = `
            ${goalName} - $${goalAmount}
            <button class="edit-button button-small" onclick="editGoal(this)">Edit</button>
            <button class="remove-button button-small" onclick="removeGoal(this)">Remove</button>
            <div class="progress-bar-container">
                <div class="progress-bar" style="width: ${goalProgress}%">${goalProgress}%</div>
            </div>
            <div class="update-container">
                <input type="number" placeholder="Update progress percentage">
                <button onclick="updateGoal(this)" class="button-small">Update</button>
            </div>
        `;

        // Add the new list item to the goals list
        document.getElementById('goalsList').appendChild(li);

        // Clear the input fields
        document.getElementById('goalType').value = 'Planned Payments';
        document.getElementById('goalAmount').value = '';
        document.getElementById('goalProgress').value = '';
        document.getElementById('customGoal').value = '';
        toggleCustomInput('Planned Payments');

        // Close the modal
        modal.style.display = 'none';
    }

    function editGoal(button) {
        const updateContainer = button.nextElementSibling.nextElementSibling.nextElementSibling;
        updateContainer.style.display = 'block';
    }

    function updateGoal(button) {
        const updateContainer = button.parentElement;
        const progressInput = updateContainer.querySelector('input').value;
        const progressBar = updateContainer.previousElementSibling.querySelector('.progress-bar');

        // Check if input is not empty
        if (progressInput === '') {
            alert('Please enter a progress percentage.');
            return;
        }

        // Update the progress bar
        progressBar.style.width = `${progressInput}%`;
        progressBar.innerText = `${progressInput}%`;

        // Hide the update container
        updateContainer.style.display = 'none';
    }

    function removeGoal(button) {
        const li = button.parentElement;
        li.parentElement.removeChild(li);
    }
</script>

</body>
</html>
